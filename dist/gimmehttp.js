(function(m,h){typeof exports=="object"&&typeof module<"u"?module.exports=h():typeof define=="function"&&define.amd?define(h):(m=typeof globalThis<"u"?globalThis:m||self,m.GimmeHTTP=h())})(this,function(){"use strict";/*! GimmeHTTP - HTTP request code generator */const m=[];function h(){return m}function A(){return m.map(r=>r.language).filter((r,n,e)=>e.indexOf(r)===n)}function C(r,n){if(r===""||r===void 0)return null;const e=m.filter(l=>l.language.toLowerCase()===r.toLowerCase());if(e.length===0)return null;const o=e.find(l=>l.default)||e[0];if(!n)return o;const i=e.find(l=>l.client.toLowerCase()===n.toLowerCase());return i||o}function q(r,n){const e=C(r,n);e&&(e.default=!0)}function f(r){if(!r)return new Error("Client is required");if(Array.isArray(r))return r.forEach(o=>f(o)),null;const n=m.filter(o=>o.language.toLowerCase()===r.language.toLowerCase()),e=n.find(o=>o.client.toLowerCase()===r.client.toLowerCase());if(r.default===void 0&&(r.default=n.length===0),e){const o=m.indexOf(r);return m[o]=r,null}return m.push(r),null}function R(){m.splice(0,m.length)}function v(r){let n=E(r);if(n)return{error:n.message};r.config=S(r.config),r.language||(r.language="javascript");const e=C(r.language,r.client);if(!e)return{error:"Client not found"};const o=e.generate(r.config,r.http);return{language:e.language,client:e.client,code:o}}function E(r){if(!r)return new Error("Request is required");if(!r.http)return new Error("http is required");if(!r.http.method)return new Error("http.method is required");if(!r.http.url)return new Error("http.url is required")}function S(r){return r=r||{},r.handleErrors===void 0&&(r.handleErrors=!1),r}class y{code=[];indentChar;lineJoin;currentDepth=0;jsonConfig={objOpen:"{",objClose:"}",arrOpen:"[",arrClose:"]",separator:": ",endComma:!1};constructor(n={}){this.indentChar=n.indent||"  ",this.lineJoin=n.join||`
`,this.jsonConfig=n.json||this.jsonConfig}getIndent(){return this.indentChar}getJoin(){return this.lineJoin}line(n=""){this.code.push({depth:n===""?0:this.currentDepth,line:n})}append(n){this.code.length>0?this.code[this.code.length-1].line+=n:this.line(n)}json(n,e=!1){if(!n){this.append("null");return}switch(typeof n){case"object":if(Array.isArray(n))this.append(this.jsonConfig.arrOpen),this.indent(),n.forEach((o,i)=>{this.json(o,typeof n=="object"||Array.isArray(n)),(i<n.length-1||this.jsonConfig.endComma)&&this.append(",")}),this.outdent(),this.line(this.jsonConfig.arrClose);else{this.append(this.jsonConfig.objOpen),this.indent();const o=Object.keys(n);o.forEach((i,l)=>{this.line(`"${i}"`+this.jsonConfig.separator),this.json(n[i],typeof i=="object"||Array.isArray(i)),(l<o.length-1||this.jsonConfig.endComma)&&this.append(",")}),this.outdent(),this.line(this.jsonConfig.objClose)}break;case"string":e?this.line(`"${n}"`):this.append(`"${n}"`);break;default:e?this.line(String(n)):this.append(String(n));break}}indent(){this.currentDepth+=1}outdent(){this.currentDepth>0&&(this.currentDepth-=1)}output(){return this.code.map(({depth:n,line:e})=>`${this.indentChar.repeat(n)}${e}`).join(this.lineJoin).trimEnd()}}function w(r){let n,e,o,i,l;try{const s=new URL(r);n=s.hostname,e=s.pathname,l=s.search,o=s.port?parseInt(s.port):s.protocol==="https:"?443:80,i=s.protocol}catch{const t=r.split("/");n=t[0];const a="/"+t.slice(1).join("/"),[u,c]=a.split("?");e=u,l=c?"?"+c:"",o=80,i="http:"}return e.startsWith("/")||(e="/"+e),{hostname:n,path:e,port:o,protocol:i,params:l}}function T(r,n){return r.toUpperCase()==="POST"&&n!==void 0&&Object.keys(n).some(e=>e.toLowerCase()==="content-type"&&n[e].toLowerCase()==="application/json")}function p(r){if(!r)return"";for(const[n,e]of Object.entries(r))if(n.toLowerCase()==="content-type")return Array.isArray(e)?e[0]:e;for(const[n,e]of Object.entries(r))if(n.toLowerCase()==="accept")return Array.isArray(e)?e[0]:e;return""}function O(r){return r?typeof r=="string"?r.length>0:typeof r=="object"?Object.keys(r).length>0:!1:!1}function j(r){return typeof r=="string"}function $(r){return r!=null&&typeof r=="object"}function d(r,n){const e=r.toLowerCase();switch(n){case"json":return e.includes("application/json");case"xml":return e.includes("application/xml")||e.includes("text/xml");case"form":return e.includes("application/x-www-form-urlencoded");case"text":return e.includes("text/");case"blob":return e.includes("application/octet-stream")||e.includes("image/");default:return!1}}function U(r){return"application/octet-stream"}function _(r,n){const e=p(r);return e?{contentType:e,wasInferred:!1}:{contentType:U(),wasInferred:!0}}const L={default:!0,language:"c",client:"libcurl",generate(r,n){const e=new y({indent:r.indent||"  ",join:r.join||`
`});if(e.line("#include <stdio.h>"),e.line("#include <curl/curl.h>"),e.line(),e.line("int main(void) {"),e.indent(),e.line("CURL *curl;"),e.line("CURLcode res;"),e.line(),e.line("curl_global_init(CURL_GLOBAL_DEFAULT);"),e.line("curl = curl_easy_init();"),e.line("if(curl) {"),e.indent(),n.params&&Object.keys(n.params).length>0){const o=new URLSearchParams;for(const[l,s]of Object.entries(n.params))if(Array.isArray(s))for(const t of s)o.append(l,t);else o.append(l,s);const i=o.toString();if(i){const l=n.url.includes("?")?"&":"?",s=i.split("&");e.line("curl_easy_setopt(curl, CURLOPT_URL,"),e.indent(),e.line(`"${n.url}"`),e.line(`"${l}${s[0]}"`);for(let t=1;t<s.length;t++)e.line(`"&${s[t]}"`);e.outdent(),e.line(");")}else e.line(`curl_easy_setopt(curl, CURLOPT_URL, "${n.url}");`)}else e.line(`curl_easy_setopt(curl, CURLOPT_URL, "${n.url}");`);if(n.method.toUpperCase()==="POST"?e.line("curl_easy_setopt(curl, CURLOPT_POST, 1L);"):n.method.toUpperCase()!=="GET"&&e.line(`curl_easy_setopt(curl, CURLOPT_CUSTOMREQUEST, "${n.method.toUpperCase()}");`),n.headers&&Object.keys(n.headers).length>0){e.line(),e.line("struct curl_slist *headers = NULL;");for(const[o,i]of Object.entries(n.headers))Array.isArray(i)?i.forEach(l=>e.line(`headers = curl_slist_append(headers, "${o}: ${l}");`)):e.line(`headers = curl_slist_append(headers, "${o}: ${i}");`);e.line("curl_easy_setopt(curl, CURLOPT_HTTPHEADER, headers);")}if(n.cookies&&Object.keys(n.cookies).length>0){e.line();const o=Object.entries(n.cookies).map(([i,l])=>`${i}=${l}`).join("; ");e.line(`curl_easy_setopt(curl, CURLOPT_COOKIE, "${o}");`)}return n.body&&(e.line(),p(n.headers),j(n.body)?e.line(`curl_easy_setopt(curl, CURLOPT_POSTFIELDS, "${n.body.replace(/"/g,'\\"')}");`):(e.line('curl_easy_setopt(curl, CURLOPT_POSTFIELDS, R"('),e.json(n.body),e.append(')");'))),e.line(),e.line("res = curl_easy_perform(curl);"),e.line("if(res != CURLE_OK)"),e.indent(),e.line('fprintf(stderr, "failed: %s", curl_easy_strerror(res));'),e.outdent(),n.headers&&Object.keys(n.headers).length>0&&e.line("curl_slist_free_all(headers);"),e.line("curl_easy_cleanup(curl);"),e.outdent(),e.line("}"),e.line(),e.line("curl_global_cleanup();"),e.line("return 0;"),e.outdent(),e.line("}"),e.output()}},B={default:!0,language:"csharp",client:"http",generate(r,n){const e=new y({indent:r.indent||"  ",join:r.join||`
`});if(e.line("using System;"),e.line("using System.Net.Http;"),e.line("using System.Threading.Tasks;"),e.line("using System.Web;"),e.line(),e.line("namespace HttpClientExample"),e.line("{"),e.indent(),e.line("class Program"),e.line("{"),e.indent(),e.line("static async Task Main(string[] args)"),e.line("{"),e.indent(),e.line("using (HttpClient client = new HttpClient())"),e.line("{"),e.indent(),n.params&&Object.keys(n.params).length>0){e.line('var uriBuilder = new UriBuilder("'+n.url+'");'),e.line("var query = HttpUtility.ParseQueryString(uriBuilder.Query);");for(const[o,i]of Object.entries(n.params))if(Array.isArray(i))for(const l of i)e.line(`query.Add("${o}", "${l}");`);else e.line(`query.Add("${o}", "${i}");`);e.line("uriBuilder.Query = query.ToString();"),e.line(`HttpRequestMessage request = new HttpRequestMessage(HttpMethod.${n.method.toUpperCase()}, uriBuilder.ToString());`)}else e.line(`HttpRequestMessage request = new HttpRequestMessage(HttpMethod.${n.method.toUpperCase()}, "${n.url}");`);if(n.headers&&Object.keys(n.headers).length>0){e.line();for(const[o,i]of Object.entries(n.headers))Array.isArray(i)?i.forEach(l=>e.line(`request.Headers.Add("${o}", "${l}");`)):e.line(`request.Headers.Add("${o}", "${i}");`)}if(n.cookies&&Object.keys(n.cookies).length>0){e.line();const o=Object.entries(n.cookies).map(([i,l])=>`${i}=${l}`).join("; ");e.line(`request.Headers.Add("Cookie", "${o}");`)}if(n.body){e.line();const o=p(n.headers);if(d(o,"form")){e.line("var formContent = new FormUrlEncodedContent(new Dictionary<string, string>"),e.line("{"),e.indent();for(const[i,l]of Object.entries(n.body))e.line(`{ "${i}", "${l}" },`);e.outdent(),e.line("});"),e.line("request.Content = formContent;")}else e.line("request.Content = new StringContent("),e.json(n.body),e.append(', System.Text.Encoding.UTF8, "application/json");')}return e.line(),e.line("HttpResponseMessage response = await client.SendAsync(request);"),e.line("response.EnsureSuccessStatusCode();"),e.line("string responseBody = await response.Content.ReadAsStringAsync();"),e.line("Console.WriteLine(responseBody);"),e.outdent(),e.line("}"),e.outdent(),e.line("}"),e.outdent(),e.line("}"),e.outdent(),e.line("}"),e.output()}},P={language:"csharp",client:"restsharp",generate(r,n){const e=new y({indent:r.indent||"  ",join:r.join||`
`});if(e.line("using RestSharp;"),r.handleErrors&&e.line("using System;"),e.line(),e.line("namespace RestSharpExample"),e.line("{"),e.indent(),e.line("class Program"),e.line("{"),e.indent(),e.line("static void Main(string[] args)"),e.line("{"),e.indent(),r.handleErrors&&(e.line("try"),e.line("{"),e.indent()),e.line(`var client = new RestClient("${n.url}");`),e.line(`var request = new RestRequest(Method.${n.method.toUpperCase()});`),n.params&&Object.keys(n.params).length>0){e.line();for(const[o,i]of Object.entries(n.params))if(Array.isArray(i))for(const l of i)e.line(`request.AddParameter("${o}", "${l}", ParameterType.QueryString);`);else e.line(`request.AddParameter("${o}", "${i}", ParameterType.QueryString);`)}if(n.headers&&Object.keys(n.headers).length>0){e.line();for(const[o,i]of Object.entries(n.headers))Array.isArray(i)?i.forEach(l=>e.line(`request.AddHeader("${o}", "${l}");`)):e.line(`request.AddHeader("${o}", "${i}");`)}if(n.cookies&&Object.keys(n.cookies).length>0){e.line();const o=Object.entries(n.cookies).map(([i,l])=>`${i}=${l}`).join("; ");e.line(`request.AddHeader("Cookie", "${o}");`)}if(n.body){e.line();const o=p(n.headers);d(o,"form")?(e.line('request.AddParameter("application/x-www-form-urlencoded", '),e.json(n.body),e.append(", ParameterType.RequestBody);")):j(n.body)?e.line(`request.AddParameter("${o||"text/plain"}", "${n.body.replace(/"/g,'\\"')}", ParameterType.RequestBody);`):(e.line("request.AddJsonBody("),e.json(n.body),e.append(");"))}return e.line(),e.line("IRestResponse response = client.Execute(request);"),e.line("Console.WriteLine(response.Content);"),r.handleErrors&&(e.outdent(),e.line("}"),e.line("catch (Exception ex)"),e.line("{"),e.indent(),e.line('Console.WriteLine($"Error: {ex.Message}");'),e.outdent(),e.line("}")),e.outdent(),e.line("}"),e.outdent(),e.line("}"),e.outdent(),e.line("}"),e.output()}},H={default:!0,language:"dart",client:"http",generate(r,n){const e=new y({indent:r.indent||"  ",join:r.join||`
`}),o=O(n.body),i=p(n.headers),l=o&&(d(i,"json")||!i&&$(n.body));if(e.line("import 'package:http/http.dart' as http;"),l&&e.line("import 'dart:convert';"),e.line(),e.line("void main() async {"),e.indent(),r.handleErrors&&(e.line("try {"),e.indent()),n.params&&Object.keys(n.params).length>0){e.line("var url = Uri.parse('"+n.url+"').replace(queryParameters: {"),e.indent();for(const[u,c]of Object.entries(n.params))Array.isArray(c)?e.line(`'${u}': [${c.map(g=>`'${g}'`).join(", ")}],`):e.line(`'${u}': '${c}',`);e.outdent(),e.line("});")}else e.line(`var url = Uri.parse('${n.url}');`);if(e.line(),n.headers&&Object.keys(n.headers).length>0){e.line("var headers = {"),e.indent();for(const[u,c]of Object.entries(n.headers))Array.isArray(c)?e.line(`'${u}': '${c.join(", ")}',`):e.line(`'${u}': '${c}',`);e.outdent(),e.line("};"),e.line()}let s="null";o&&(d(i,"json")||!i&&$(n.body)?(e.line("var body = jsonEncode("),e.json(n.body),e.append(");"),s="body",e.line()):j(n.body)&&(e.line(`var body = '${n.body.replace(/'/g,"\\'")}';`),s="body",e.line()));const t=n.method.toLowerCase(),a=n.headers&&Object.keys(n.headers).length>0;return t==="get"?e.line(`var response = await http.get(url${a?", headers: headers":""});`):t==="post"?e.line(`var response = await http.post(url${a?", headers: headers":""}${s!=="null"?", body: "+s:""});`):t==="put"?e.line(`var response = await http.put(url${a?", headers: headers":""}${s!=="null"?", body: "+s:""});`):t==="delete"?e.line(`var response = await http.delete(url${a?", headers: headers":""}${s!=="null"?", body: "+s:""});`):t==="patch"&&e.line(`var response = await http.patch(url${a?", headers: headers":""}${s!=="null"?", body: "+s:""});`),e.line(),e.line("print(response.body);"),r.handleErrors&&(e.outdent(),e.line("} catch (e) {"),e.indent(),e.line('print("Error: $e");'),e.outdent(),e.line("}")),e.outdent(),e.line("}"),e.output()}},x={default:!0,language:"go",client:"http",generate(r,n){const e=new y({indent:r.indent||"  ",join:r.join||`
`,json:{objOpen:"map[string]any{",objClose:"}",arrOpen:"[]any{",arrClose:"}",separator:": ",endComma:!1}}),o=p(n.headers),i=O(n.body),l=i&&(d(o,"json")||!o&&$(n.body)),s=i&&d(o,"form"),t=l||s;if(e.line("package main"),e.line(),e.line("import ("),e.indent(),e.line('"fmt"'),e.line('"net/http"'),e.line('"io"'),t&&e.line('"bytes"'),l&&e.line('"encoding/json"'),(s||n.params&&Object.keys(n.params).length>0)&&e.line('"net/url"'),r.handleErrors&&e.line('"log"'),e.outdent(),e.line(")"),e.line(),e.line("func main() {"),e.indent(),n.params&&Object.keys(n.params).length>0){e.line(`baseURL := "${n.url}"`),e.line("u, err := url.Parse(baseURL)"),r.handleErrors&&(e.line("if err != nil {"),e.indent(),e.line("log.Fatal(err)"),e.outdent(),e.line("}")),e.line("q := u.Query()");for(const[u,c]of Object.entries(n.params))if(Array.isArray(c))for(const g of c)e.line(`q.Add("${u}", "${g}")`);else e.line(`q.Set("${u}", "${c}")`);e.line("u.RawQuery = q.Encode()"),e.line("url := u.String()")}else e.line(`url := "${n.url}"`);e.line();let a="nil";if(l)e.line("jsonBodyMap := "),e.json(n.body),r.handleErrors?(e.line("jsonBodyBytes, err := json.Marshal(jsonBodyMap)"),e.line("if err != nil {"),e.indent(),e.line("log.Fatal(err)"),e.outdent(),e.line("}")):e.line("jsonBodyBytes, _ := json.Marshal(jsonBodyMap)"),a="bytes.NewBuffer(jsonBodyBytes)",e.line();else if(s){e.line("formData := url.Values{}");for(const[u,c]of Object.entries(n.body))e.line(`formData.Set("${u}", "${c}")`);e.line("formBody := formData.Encode()"),a="bytes.NewBufferString(formBody)",e.line()}else i&&typeof n.body=="string"&&(a=`bytes.NewBufferString("${n.body.replace(/"/g,'\\"')}")`);if(r.handleErrors?(e.line(`req, err := http.NewRequest("${n.method.toUpperCase()}", url, ${a})`),e.line("if err != nil {"),e.indent(),e.line("log.Fatal(err)"),e.outdent(),e.line("}"),e.line()):(e.line(`req, _ := http.NewRequest("${n.method.toUpperCase()}", url, ${a})`),e.line()),n.headers){for(const[u,c]of Object.entries(n.headers))if(Array.isArray(c))for(const g of c)e.line(`req.Header.Add("${u}", "${g}")`);else e.line(`req.Header.Set("${u}", "${c}")`);e.line()}if(n.cookies){for(const[u,c]of Object.entries(n.cookies))if(Array.isArray(c))for(const g of c)e.line(`req.AddCookie(&http.Cookie{Name: "${u}", Value: "${g}"})`);else e.line(`req.AddCookie(&http.Cookie{Name: "${u}", Value: "${c}"})`);e.line()}return r.handleErrors?(e.line("resp, err := http.DefaultClient.Do(req)"),e.line("if err != nil {"),e.indent(),e.line("log.Fatal(err)"),e.outdent(),e.line("}")):e.line("resp, _ := http.DefaultClient.Do(req)"),e.line("defer resp.Body.Close()"),e.line(),r.handleErrors?(e.line("body, err := io.ReadAll(resp.Body)"),e.line("if err != nil {"),e.indent(),e.line("log.Fatal(err)"),e.outdent(),e.line("}")):e.line("body, _ := io.ReadAll(resp.Body)"),e.line(),e.line("fmt.Println(string(body))"),e.outdent(),e.line("}"),e.output()}},N={default:!0,language:"java",client:"httpurlconnection",generate(r,n){const e=new y({indent:r.indent||"  ",join:r.join||`
`}),o=O(n.body),i=p(n.headers);if(e.line("import java.io.*;"),e.line("import java.net.*;"),n.params&&Object.keys(n.params).length>0&&e.line("import java.net.URLEncoder;"),o&&(d(i,"json")||!i&&$(n.body))&&e.line("import org.json.JSONObject;"),e.line(),e.line("public class HttpExample {"),e.indent(),e.line("public static void main(String[] args) {"),e.indent(),r.handleErrors&&(e.line("try {"),e.indent()),n.params&&Object.keys(n.params).length>0){e.line(`String baseUrl = "${n.url}";`),e.line("StringBuilder urlBuilder = new StringBuilder(baseUrl);"),e.line('urlBuilder.append(baseUrl.contains("?") ? "&" : "?");'),e.line(),e.line("String[] paramPairs = {"),e.indent();const l=[];for(const[s,t]of Object.entries(n.params))if(Array.isArray(t))for(const a of t)l.push(`"${s}=" + URLEncoder.encode("${a}", "UTF-8")`);else l.push(`"${s}=" + URLEncoder.encode("${t}", "UTF-8")`);for(let s=0;s<l.length;s++)s===l.length-1?e.line(l[s]):e.line(l[s]+",");e.outdent(),e.line("};"),e.line(),e.line("for (int i = 0; i < paramPairs.length; i++) {"),e.indent(),e.line('if (i > 0) urlBuilder.append("&");'),e.line("urlBuilder.append(paramPairs[i]);"),e.outdent(),e.line("}"),e.line(),e.line("URL url = new URL(urlBuilder.toString());")}else e.line(`URL url = new URL("${n.url}");`);if(e.line("HttpURLConnection conn = (HttpURLConnection) url.openConnection();"),e.line(`conn.setRequestMethod("${n.method.toUpperCase()}");`),n.headers&&Object.keys(n.headers).length>0){e.line();for(const[l,s]of Object.entries(n.headers))Array.isArray(s)?s.forEach(t=>e.line(`conn.setRequestProperty("${l}", "${t}");`)):e.line(`conn.setRequestProperty("${l}", "${s}");`)}if(n.cookies&&Object.keys(n.cookies).length>0){e.line();const l=Object.entries(n.cookies).map(([s,t])=>`${s}=${t}`).join("; ");e.line(`conn.setRequestProperty("Cookie", "${l}");`)}if(o)if(e.line(),e.line("conn.setDoOutput(true);"),e.line(),d(i,"json")||!i&&$(n.body)){e.line("JSONObject jsonBody = new JSONObject();");for(const[l,s]of Object.entries(n.body))typeof s=="string"?e.line(`jsonBody.put("${l}", "${s}");`):typeof s=="number"||typeof s=="boolean"?e.line(`jsonBody.put("${l}", ${s});`):s===null?e.line(`jsonBody.put("${l}", JSONObject.NULL);`):e.line(`jsonBody.put("${l}", ${JSON.stringify(s)});`);e.line(),e.line("try (OutputStream os = conn.getOutputStream()) {"),e.indent(),e.line('byte[] input = jsonBody.toString().getBytes("utf-8");'),e.line("os.write(input, 0, input.length);"),e.outdent(),e.line("}")}else j(n.body)&&(e.line("try (OutputStream os = conn.getOutputStream()) {"),e.indent(),e.line(`byte[] input = "${n.body.replace(/"/g,'\\"')}".getBytes("utf-8");`),e.line("os.write(input, 0, input.length);"),e.outdent(),e.line("}"));return e.line(),e.line("int responseCode = conn.getResponseCode();"),e.line("BufferedReader in = new BufferedReader(new InputStreamReader(conn.getInputStream()));"),e.line("String inputLine;"),e.line("StringBuilder response = new StringBuilder();"),e.line(),e.line("while ((inputLine = in.readLine()) != null) {"),e.indent(),e.line("response.append(inputLine);"),e.outdent(),e.line("}"),e.line("in.close();"),e.line(),e.line("System.out.println(response.toString());"),r.handleErrors&&(e.outdent(),e.line("} catch (Exception e) {"),e.indent(),e.line("e.printStackTrace();"),e.outdent(),e.line("}")),e.outdent(),e.line("}"),e.outdent(),e.line("}"),e.output()}},J={language:"java",client:"okhttp",generate(r,n){const e=new y({indent:r.indent||"  ",join:r.join||`
`}),o=O(n.body),i=p(n.headers),l=o&&(d(i,"json")||!i&&$(n.body));if(e.line("import okhttp3.*;"),l&&e.line("import org.json.JSONObject;"),i&&d(i,"form")&&e.line("import java.util.*;"),e.line(),e.line("public class HttpExample {"),e.indent(),e.line("public static void main(String[] args) {"),e.indent(),r.handleErrors&&(e.line("try {"),e.indent()),e.line("OkHttpClient client = new OkHttpClient();"),e.line(),o){if(d(i,"form")){e.line("FormBody.Builder formBuilder = new FormBody.Builder();");for(const[s,t]of Object.entries(n.body))e.line(`formBuilder.add("${s}", "${t}");`);e.line("RequestBody body = formBuilder.build();")}else if(l){e.line("JSONObject jsonBody = new JSONObject();");for(const[s,t]of Object.entries(n.body))typeof t=="string"?e.line(`jsonBody.put("${s}", "${t}");`):typeof t=="number"||typeof t=="boolean"?e.line(`jsonBody.put("${s}", ${t});`):t===null?e.line(`jsonBody.put("${s}", JSONObject.NULL);`):e.line(`jsonBody.put("${s}", ${JSON.stringify(t)});`);e.line("RequestBody body = RequestBody.create("),e.indent(),e.line("jsonBody.toString(),"),e.line('MediaType.parse("application/json; charset=utf-8")'),e.outdent(),e.line(");")}else j(n.body)&&(e.line("RequestBody body = RequestBody.create("),e.indent(),e.line(`"${n.body.replace(/"/g,'\\"')}",`),e.line(`MediaType.parse("${i||"text/plain"}; charset=utf-8")`),e.outdent(),e.line(");"));e.line()}if(n.params&&Object.keys(n.params).length>0){e.line('HttpUrl.Builder urlBuilder = HttpUrl.parse("'+n.url+'").newBuilder();');for(const[s,t]of Object.entries(n.params))if(Array.isArray(t))for(const a of t)e.line(`urlBuilder.addQueryParameter("${s}", "${a}");`);else e.line(`urlBuilder.addQueryParameter("${s}", "${t}");`);e.line("HttpUrl url = urlBuilder.build();"),e.line()}if(e.line("Request.Builder requestBuilder = new Request.Builder()"),e.indent(),n.params&&Object.keys(n.params).length>0?e.line(".url(url)"):e.line(`.url("${n.url}")`),o?e.line('.method("'+n.method.toUpperCase()+'", body)'):e.line('.method("'+n.method.toUpperCase()+'", null)'),n.headers&&Object.keys(n.headers).length>0)for(const[s,t]of Object.entries(n.headers))Array.isArray(t)?t.forEach(a=>e.line(`.addHeader("${s}", "${a}")`)):e.line(`.addHeader("${s}", "${t}")`);if(n.cookies&&Object.keys(n.cookies).length>0){const s=Object.entries(n.cookies).map(([t,a])=>`${t}=${a}`).join("; ");e.line(`.addHeader("Cookie", "${s}")`)}return e.line(".build();"),e.outdent(),e.line(),e.line("Request request = requestBuilder;"),e.line("Response response = client.newCall(request).execute();"),e.line(),e.line("System.out.println(response.body().string());"),r.handleErrors&&(e.outdent(),e.line("} catch (Exception e) {"),e.indent(),e.line("e.printStackTrace();"),e.outdent(),e.line("}")),e.outdent(),e.line("}"),e.outdent(),e.line("}"),e.output()}},D={default:!0,language:"javascript",client:"fetch",generate(r,n){const e=new y({indent:r.indent||"  ",join:r.join||`
`});if(n.params&&Object.keys(n.params).length>0){e.line('const url = new URL("'+n.url+'");'),e.line("const params = new URLSearchParams();");for(const[s,t]of Object.entries(n.params))if(Array.isArray(t))for(const a of t)e.line(`params.append("${s}", "${a}");`);else e.line(`params.set("${s}", "${t}");`);e.line("url.search = params.toString();"),e.line(),e.line("fetch(url.toString(), {")}else e.line('fetch("'+n.url+'", {');if(e.indent(),e.line(`method: "${n.method.toUpperCase()}",`),n.headers){e.line("headers: {"),e.indent();for(const[s,t]of Object.entries(n.headers))Array.isArray(t)?e.line(`"${s}": "${t.join(", ")}",`):e.line(`"${s}": "${t}",`);e.outdent(),e.line("},")}n.body&&(e.line("body: "),e.json(n.body)),e.outdent(),e.line("})");const{contentType:o,wasInferred:i}=_(n.headers);let l="text()";return(!i||o!=="application/octet-stream")&&(d(o,"json")?l="json()":d(o,"xml")||d(o,"text")?l="text()":d(o,"blob")&&(l="blob()")),i&&l==="json()"&&e.line(`// Response Content-Type inferred as: ${o}`),r.handleErrors?(e.line(".then(response => {"),e.indent(),e.line("if (!response.ok) {"),e.indent(),e.line('throw new Error("Network response was not ok");'),e.outdent(),e.line("}"),e.line(`return response.${l};`),e.outdent(),e.line("})"),e.line(".then(data => console.log(data))"),e.line('.catch(error => console.error("There was a problem with the fetch operation:", error));')):(e.line(`.then(response => response.${l})`),e.line(".then(data => console.log(data));")),e.output()}},I={language:"javascript",client:"axios",generate(r,n){const e=new y({indent:r.indent||"  ",join:r.join||`
`});if(e.line("axios({"),e.indent(),e.line(`method: "${n.method.toLowerCase()}",`),e.line(`url: "${n.url}",`),n.params&&Object.keys(n.params).length>0){e.line("params: {"),e.indent();for(const[o,i]of Object.entries(n.params))Array.isArray(i)?e.line(`"${o}": [${i.map(l=>`"${l}"`).join(", ")}],`):e.line(`"${o}": "${i}",`);e.outdent(),e.line("},")}if(n.headers){e.line("headers: {"),e.indent();for(const[o,i]of Object.entries(n.headers))Array.isArray(i)?e.line(`"${o}": "${i.join(", ")}",`):e.line(`"${o}": "${i}",`);e.outdent(),e.line("},")}if(n.cookies){e.line("cookies: {"),e.indent();for(const[o,i]of Object.entries(n.cookies))e.line(`"${o}": "${i}",`);e.outdent(),e.line("},")}return n.body&&(e.line("data: "),e.json(n.body)),e.outdent(),e.line("})"),r.handleErrors?(e.line(".then(response => {"),e.indent(),e.line("console.log(response.data);"),e.outdent(),e.line("})"),e.line(".catch(error => {"),e.indent(),e.line('console.error("There was an error:", error);'),e.outdent(),e.line("});")):e.line(".then(response => console.log(response.data));"),e.output()}},F={language:"javascript",client:"jquery",generate(r,n){const e=new y({indent:r.indent||"  ",join:r.join||`
`});if(e.line("$.ajax({"),e.indent(),e.line(`url: "${n.url}",`),e.line(`type: "${n.method.toUpperCase()}",`),n.params&&Object.keys(n.params).length>0){e.line("data: {"),e.indent();for(const[o,i]of Object.entries(n.params))Array.isArray(i)?e.line(`"${o}": [${i.map(l=>`"${l}"`).join(", ")}],`):e.line(`"${o}": "${i}",`);e.outdent(),e.line("},")}if(n.headers){e.line("headers: {"),e.indent();for(const[o,i]of Object.entries(n.headers))Array.isArray(i)?e.line(`"${o}": "${i.join(", ")}",`):e.line(`"${o}": "${i}",`);e.outdent(),e.line("},")}return n.body&&(e.line("data: "),e.json(n.body),e.append(","),e.line('contentType: "application/json",')),e.line("success: function(data) {"),e.indent(),e.line("console.log(data);"),e.outdent(),e.line("},"),r.handleErrors&&(e.line("error: function(jqXHR, textStatus, errorThrown) {"),e.indent(),e.line('console.error("Request failed:", textStatus, errorThrown);'),e.outdent(),e.line("},")),e.outdent(),e.line("});"),e.output()}},M={default:!0,language:"kotlin",client:"ktor",generate(r,n){const e=new y({indent:r.indent||"  ",join:r.join||`
`}),o=O(n.body),i=p(n.headers);if(e.line("import io.ktor.client.*"),e.line("import io.ktor.client.engine.cio.*"),e.line("import io.ktor.client.request.*"),e.line("import io.ktor.client.statement.*"),o&&(d(i,"json")||!i&&$(n.body))&&(e.line("import io.ktor.http.*"),e.line("import kotlinx.serialization.json.*")),i&&d(i,"form")&&e.line("import io.ktor.http.*"),e.line(),e.line("suspend fun main() {"),e.indent(),r.handleErrors&&(e.line("try {"),e.indent()),e.line("val client = HttpClient(CIO)"),e.line(),e.line(`val response: HttpResponse = client.${n.method.toLowerCase()} {`),e.indent(),e.line(`url("${n.url}")`),n.params&&Object.keys(n.params).length>0)for(const[l,s]of Object.entries(n.params))if(Array.isArray(s))for(const t of s)e.line(`parameter("${l}", "${t}")`);else e.line(`parameter("${l}", "${s}")`);if(n.headers&&Object.keys(n.headers).length>0)for(const[l,s]of Object.entries(n.headers))Array.isArray(s)?s.forEach(t=>e.line(`header("${l}", "${t}")`)):e.line(`header("${l}", "${s}")`);if(n.cookies&&Object.keys(n.cookies).length>0){const l=Object.entries(n.cookies).map(([s,t])=>`${s}=${t}`).join("; ");e.line(`header("Cookie", "${l}")`)}if(o)if(d(i,"form")){e.line("setBody("),e.indent(),e.line("FormDataContent(Parameters.build {"),e.indent();for(const[l,s]of Object.entries(n.body))e.line(`append("${l}", "${s}")`);e.outdent(),e.line("})"),e.outdent(),e.line(")")}else if(d(i,"json")||!i&&$(n.body)){e.line("contentType(ContentType.Application.Json)"),e.line("setBody("),e.indent(),e.line("buildJsonObject {"),e.indent();for(const[l,s]of Object.entries(n.body))typeof s=="string"?e.line(`put("${l}", "${s}")`):typeof s=="number"?e.line(`put("${l}", ${s})`):typeof s=="boolean"?e.line(`put("${l}", ${s})`):s===null?e.line(`put("${l}", JsonNull)`):e.line(`put("${l}", JsonPrimitive(${JSON.stringify(s)}))`);e.outdent(),e.line("}"),e.outdent(),e.line(")")}else j(n.body)&&e.line(`setBody("${n.body.replace(/"/g,'\\"')}")`);return e.outdent(),e.line("}"),e.line(),e.line("println(response.bodyAsText())"),e.line("client.close()"),r.handleErrors&&(e.outdent(),e.line("} catch (e: Exception) {"),e.indent(),e.line('println("Error: ${e.message}")'),e.outdent(),e.line("}")),e.outdent(),e.line("}"),e.output()}},G={language:"node",client:"http",generate(r,n){const e=new y({indent:r.indent||"  ",join:r.join||`
`});e.line('const http = require("http");'),e.line();const{hostname:o,path:i}=w(n.url);let l=i;if(n.params&&Object.keys(n.params).length>0){const s=new URLSearchParams;for(const[a,u]of Object.entries(n.params))if(Array.isArray(u))for(const c of u)s.append(a,c);else s.append(a,u);const t=s.toString();if(t){const a=i.includes("?")?"&":"?";l=`${i}${a}${t}`}}if(e.line("const options = {"),e.indent(),e.line(`method: "${n.method.toUpperCase()}",`),e.line(`hostname: "${o}",`),e.line(`path: "${l}",`),n.headers||n.cookies){if(e.line("headers: {"),e.indent(),n.headers)for(const[s,t]of Object.entries(n.headers))Array.isArray(t)?e.line(`"${s}": "${t.join(", ")}",`):e.line(`"${s}": "${t}",`);if(n.cookies){const s=Object.entries(n.cookies).map(([t,a])=>`${t}=${a}`).join("; ");e.line(`"Cookie": "${s}",`)}e.outdent(),e.line("},")}return e.outdent(),e.line("};"),e.line(),e.line("const req = http.request(options, (res) => {"),e.indent(),e.line('let data = "";'),e.line(),e.line('res.on("data", (chunk) => {'),e.indent(),e.line("data += chunk;"),e.outdent(),e.line("});"),e.line(),e.line('res.on("end", () => {'),e.indent(),e.line("console.log(data);"),e.outdent(),e.line("});"),e.outdent(),e.line("});"),r.handleErrors&&(e.line(),e.line('req.on("error", (error) => {'),e.indent(),e.line("console.error(error);"),e.outdent(),e.line("});")),e.line(),n.body&&(e.line("req.write("),e.json(n.body),e.append(");")),e.line("req.end();"),e.output()}},Q={language:"node",client:"fetch",generate(r,n){const e=new y({indent:r.indent||"  ",join:r.join||`
`});if(e.line('const fetch = require("node-fetch");'),e.line(),n.params&&Object.keys(n.params).length>0){e.line('const url = new URL("'+n.url+'");'),e.line("const params = new URLSearchParams();");for(const[l,s]of Object.entries(n.params))if(Array.isArray(s))for(const t of s)e.line(`params.append("${l}", "${t}");`);else e.line(`params.set("${l}", "${s}");`);e.line("url.search = params.toString();"),e.line(),e.line("fetch(url.toString(), {")}else e.line('fetch("'+n.url+'", {');if(e.indent(),e.line('method: "'+n.method.toUpperCase()+'",'),n.headers){e.line("headers: {"),e.indent();for(const[l,s]of Object.entries(n.headers))Array.isArray(s)?e.line(`"${l}": "${s.join(", ")}",`):e.line(`"${l}": "${s}",`);e.outdent(),e.line("},")}n.body&&(e.line("body: "),e.json(n.body)),e.outdent(),e.line("})");const o=p(n.headers);let i="text()";return d(o,"json")?i="json()":d(o,"xml")||d(o,"text")?i="text()":d(o,"blob")&&(i="blob()"),r.handleErrors?(e.line(".then(response => {"),e.indent(),e.line("if (!response.ok) {"),e.indent(),e.line('throw new Error("response not ok");'),e.outdent(),e.line("}"),e.line(`return response.${i};`),e.outdent(),e.line("})"),e.line(".then(data => console.log(data))"),e.line('.catch(error => console.error("error:", error));')):(e.line(`.then(response => response.${i})`),e.line(".then(data => console.log(data))")),e.output()}},z={default:!0,language:"php",client:"curl",generate(r,n){const e=new y({indent:r.indent||"  ",join:r.join||`
`});if(e.line("<?php"),e.line(),e.line("$ch = curl_init();"),e.line(),n.params&&Object.keys(n.params).length>0){e.line('$url = "'+n.url+'";'),e.line("$params = [];");for(const[o,i]of Object.entries(n.params))if(Array.isArray(i))for(const l of i)e.line(`$params[] = "${o}=" . urlencode("${l}");`);else e.line(`$params[] = "${o}=" . urlencode("${i}");`);e.line('$url .= (strpos($url, "?") !== false ? "&" : "?") . implode("&", $params);'),e.line(),e.line("curl_setopt($ch, CURLOPT_URL, $url);")}else e.line(`curl_setopt($ch, CURLOPT_URL, "${n.url}");`);if(e.line("curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);"),e.line(`curl_setopt($ch, CURLOPT_CUSTOMREQUEST, "${n.method.toUpperCase()}");`),n.headers){e.line(),e.line("$headers = [];");for(const[o,i]of Object.entries(n.headers))Array.isArray(i)?i.forEach(l=>e.line(`$headers[] = "${o}: ${l}";`)):e.line(`$headers[] = "${o}: ${i}";`);e.line("curl_setopt($ch, CURLOPT_HTTPHEADER, $headers);")}if(n.cookies){e.line(),e.line("$cookies = [];");for(const[o,i]of Object.entries(n.cookies))e.line(`$cookies[] = "${o}=${i}";`);e.line('curl_setopt($ch, CURLOPT_COOKIE, implode("; ", $cookies));')}if(n.body){e.line();const o=p(n.headers);if(d(o,"form"))e.line("$postData = "),e.json(n.body),e.append(";"),e.line("curl_setopt($ch, CURLOPT_POSTFIELDS, http_build_query($postData));");else if(d(o,"json")||!o&&$(n.body))e.line("curl_setopt($ch, CURLOPT_POSTFIELDS,"),e.line("<<<JSON"),e.line(),e.json(n.body),e.line("JSON"),e.line(");");else if(j(n.body)){const i=n.body.replace(/'/g,"\\'");e.line(`curl_setopt($ch, CURLOPT_POSTFIELDS, '${i}');`)}}return e.line(),e.line("$response = curl_exec($ch);"),r.handleErrors&&(e.line("if (curl_errno($ch)) {"),e.indent(),e.line('echo "Error: " . curl_error($ch);'),e.outdent(),e.line("}")),e.line("curl_close($ch);"),e.line(),e.line("echo $response;"),e.output()}},V={language:"php",client:"guzzle",generate(r,n){const e=new y({indent:r.indent||"  ",join:r.join||`
`,json:{objOpen:"[",objClose:"]",arrOpen:"[",arrClose:"]",separator:" => ",endComma:!0}});if(e.line("<?php"),e.line(),e.line("require 'vendor/autoload.php';"),e.line(),e.line("use GuzzleHttp\\Client;"),r.handleErrors&&e.line("use GuzzleHttp\\Exception\\RequestException;"),e.line(),r.handleErrors&&(e.line("try {"),e.indent()),e.line("$client = new Client();"),e.line("$response = $client->request("),e.indent(),e.line('"'+n.method.toUpperCase()+'",'),e.line('"'+n.url+'",'),n.headers||n.cookies||n.body||n.params){if(e.line("["),n.params&&Object.keys(n.params).length>0){e.indent(),e.line('"query" => ['),e.indent();for(const[o,i]of Object.entries(n.params))if(Array.isArray(i))for(const l of i)e.line(`"${o}" => "${l}",`);else e.line(`"${o}" => "${i}",`);e.outdent(),e.line("],"),e.outdent()}if(n.headers){e.indent(),e.line('"headers" => ['),e.indent();for(const[o,i]of Object.entries(n.headers))Array.isArray(i)?i.forEach(l=>e.line(`"${o}" => "${l}",`)):e.line(`"${o}" => "${i}",`);e.outdent(),e.line("],"),e.outdent()}if(n.cookies){e.indent(),e.line('"cookies" => ['),e.indent();for(const[o,i]of Object.entries(n.cookies))e.line(`"${o}" => "${i}",`);e.outdent(),e.line("],"),e.outdent()}if(n.body){e.indent();const o=p(n.headers);d(o,"form")?(e.line('"form_params" => '),e.json(n.body),e.append(",")):(e.line('"json" => '),e.json(n.body),e.append(",")),e.outdent()}e.line("],")}return e.outdent(),e.line(");"),e.line(),e.line("echo $response->getBody();"),r.handleErrors&&(e.outdent(),e.line("} catch (RequestException $e) {"),e.indent(),e.line('echo "Error: " . $e->getMessage();'),e.outdent(),e.line("}")),e.output()}},K={default:!0,language:"python",client:"http",generate(r,n){const e=new y({indent:r.indent||"  ",join:r.join||`
`}),o=n.method.toUpperCase(),i=o!=="GET"&&n.body,l=n.headers&&Object.keys(n.headers).length>0,s=n.cookies&&Object.keys(n.cookies).length>0;let t=[];e.line("import http.client"),e.line("import json"),e.line(),r.handleErrors&&(e.line("try:"),e.indent());const{hostname:a,path:u,port:c}=w(n.url);let g=`"${u}"`;if(n.params&&Object.keys(n.params).length>0){e.line("from urllib.parse import urlencode"),e.line("params = {"),e.indent();for(const[b,k]of Object.entries(n.params))Array.isArray(k)?e.line(`"${b}": [${k.map(ie=>`"${ie}"`).join(", ")}],`):e.line(`"${b}": "${k}",`);e.outdent(),e.line("}"),e.line("query_string = urlencode(params, doseq=True)"),e.line(`final_path = f"${u}?{query_string}"`),g="final_path"}if(e.line(`conn = http.client.HTTPSConnection("${a}", ${c})`),l){e.line(),t.push("headers"),e.line("headers = {"),e.indent();for(const[b,k]of Object.entries(n.headers))Array.isArray(k)?e.line(`"${b}": "${k.join(", ")}",`):e.line(`"${b}": "${k}",`);e.outdent(),e.line("}")}if(s){e.line(),t.push("cookies"),e.line("cookies = {"),e.indent();for(const[b,k]of Object.entries(n.cookies))e.line(`"${b}": "${k}",`);e.outdent(),e.line("}")}if(i){e.line();const b=p(n.headers);d(b,"form")?(e.line("from urllib.parse import urlencode"),e.line("payload_dict = "),e.json(n.body),e.line("payload = urlencode(payload_dict)")):d(b,"json")||!b&&$(n.body)?(e.line("payload_dict = "),e.json(n.body),e.line("payload = json.dumps(payload_dict)")):j(n.body)&&e.line(`payload = "${n.body.replace(/"/g,'\\"')}"`)}if(e.line(),i){const b=t.filter(k=>k!=="payload");e.line(`conn.request("${o}", ${g}, payload`+(b.length>0?`, ${b.join(", ")}`:"")+")")}else e.line(`conn.request("${o}", ${g}`+(t.length>0?`, ${t.join(", ")}`:"")+")");return e.line("res = conn.getresponse()"),e.line("data = res.read()"),e.line(),e.line('print(data.decode("utf-8"))'),r.handleErrors&&(e.outdent(),e.line("except Exception as e:"),e.indent(),e.line('print(f"Error: {e}")'),e.outdent()),e.output()}},W={language:"python",client:"requests",generate(r,n){const e=new y({indent:r.indent||"  ",join:r.join||`
`}),i=n.method.toUpperCase()!=="GET"&&n.body,l=n.headers&&Object.keys(n.headers).length>0,s=n.cookies&&Object.keys(n.cookies).length>0;let t=[];if(e.line("import requests"),e.line(),r.handleErrors&&(e.line("try:"),e.indent()),e.line('url = "'+n.url+'"'),n.params&&Object.keys(n.params).length>0){e.line(),t.push("params=url_params"),e.line("url_params = {"),e.indent();for(const[a,u]of Object.entries(n.params))Array.isArray(u)?e.line(`"${a}": [${u.map(c=>`"${c}"`).join(", ")}]`):e.line(`"${a}": "${u}"`),Object.keys(n.params).indexOf(a)!==Object.keys(n.params).length-1&&e.append(",");e.outdent(),e.line("}")}if(l){e.line(),t.push("headers=headers"),e.line("headers = {"),e.indent();for(const[a,u]of Object.entries(n.headers))e.line(`"${a}": "${u}"`),Object.keys(n.headers).indexOf(a)!==Object.keys(n.headers).length-1&&e.append(",");e.outdent(),e.line("}")}if(s){e.line(),t.push("cookies=cookies"),e.line("cookies = {"),e.indent();for(const[a,u]of Object.entries(n.cookies))e.line(`"${a}": "${u}"`),Object.keys(n.cookies).indexOf(a)!==Object.keys(n.cookies).length-1&&e.append(",");e.outdent(),e.line("}")}if(i){e.line();const a=p(n.headers);d(a,"form")?(t.push("data=form_data"),e.line("form_data = "),e.json(n.body)):(t.push("json=json_data"),e.line("json_data = "),e.json(n.body))}return e.line(),e.line("response = requests."+n.method.toLowerCase()+"(url"+(t.length>0?`, ${t.join(", ")}`:"")+")"),e.line("print(response.text)"),r.handleErrors&&(e.outdent(),e.line("except requests.exceptions.RequestException as e:"),e.indent(),e.line('print(f"Error: {e}")'),e.outdent()),e.output()}},X={default:!0,language:"ruby",client:"nethttp",generate(r,n){const e=new y({indent:r.indent||"  ",join:r.join||`
`});if(e.line('require "net/http"'),e.line('require "uri"'),e.line(),r.handleErrors&&(e.line("begin"),e.indent()),n.params&&Object.keys(n.params).length>0){e.line('uri = URI.parse("'+n.url+'")'),e.line("params = {"),e.indent();for(const[o,i]of Object.entries(n.params))Array.isArray(i)?e.line(`"${o}" => [${i.map(l=>`"${l}"`).join(", ")}],`):e.line(`"${o}" => "${i}",`);e.outdent(),e.line("}"),e.line("uri.query = URI.encode_www_form(params)")}else e.line('uri = URI.parse("'+n.url+'")');if(n.method.toUpperCase()==="GET"?e.line("request = Net::HTTP::Get.new(uri)"):n.method.toUpperCase()==="POST"?e.line("request = Net::HTTP::Post.new(uri)"):n.method.toUpperCase()==="PUT"?e.line("request = Net::HTTP::Put.new(uri)"):n.method.toUpperCase()==="DELETE"?e.line("request = Net::HTTP::Delete.new(uri)"):e.line('request = Net::HTTP::GenericRequest.new("'+n.method.toUpperCase()+'", uri.path, nil, nil)'),n.headers&&Object.keys(n.headers).length>0)for(const[o,i]of Object.entries(n.headers))Array.isArray(i)?i.forEach(l=>e.line(`request["${o}"] = "${l}"`)):e.line(`request["${o}"] = "${i}"`);if(n.cookies&&Object.keys(n.cookies).length>0){const o=Object.entries(n.cookies).map(([i,l])=>`${i}=${l}`).join("; ");e.line(`request["Cookie"] = "${o}"`)}if(n.body){const o=p(n.headers);d(o,"json")||!o&&$(n.body)?(e.line("request.body = "),e.json(n.body),e.append(".to_json")):j(n.body)?e.line(`request.body = "${n.body.replace(/"/g,'\\"')}"`):(e.line("request.body = "),e.json(n.body),e.append(".to_json"))}return e.line(),e.line('response = Net::HTTP.start(uri.hostname, uri.port, use_ssl: uri.scheme == "https") do |http|'),e.indent(),e.line("http.request(request)"),e.outdent(),e.line("end"),e.line(),e.line("puts response.body"),r.handleErrors&&(e.outdent(),e.line("rescue StandardError => e"),e.indent(),e.line('puts "Error: #{e.message}"'),e.outdent(),e.line("end")),e.output()}},Y={language:"ruby",client:"faraday",generate(r,n){const e=new y({indent:r.indent||"  ",join:r.join||`
`});if(e.line('require "faraday"'),e.line(),r.handleErrors&&(e.line("begin"),e.indent()),e.line('conn = Faraday.new(url: "'+n.url+'") do |f|'),e.indent(),e.line("f.adapter Faraday.default_adapter"),e.outdent(),e.line("end"),e.line(),e.line("response = conn."+n.method.toLowerCase()+" do |req|"),e.indent(),e.line('req.url "'+n.url+'"'),n.params&&Object.keys(n.params).length>0){e.line();for(const[o,i]of Object.entries(n.params))if(Array.isArray(i))for(const l of i)e.line(`req.params["${o}"] = "${l}"`);else e.line(`req.params["${o}"] = "${i}"`)}if(n.headers){e.line();for(const[o,i]of Object.entries(n.headers))Array.isArray(i)?i.forEach(l=>e.line(`req.headers["${o}"] = "${l}"`)):e.line(`req.headers["${o}"] = "${i}"`)}if(n.cookies){e.line();const o=Object.entries(n.cookies).map(([i,l])=>`${i}=${l}`).join("; ");e.line(`req.headers["Cookie"] = "${o}"`)}if(n.body){e.line();const o=p(n.headers);d(o,"json")||!o&&$(n.body)?(e.line("req.body = "),e.json(n.body),e.append(".to_json")):j(n.body)?e.line(`req.body = "${n.body.replace(/"/g,'\\"')}"`):(e.line("req.body = "),e.json(n.body),e.append(".to_json"))}return e.outdent(),e.line("end"),e.line(),e.line("puts response.body"),r.handleErrors&&(e.outdent(),e.line("rescue Faraday::Error => e"),e.indent(),e.line('puts "Error: #{e.message}"'),e.outdent(),e.line("end")),e.output()}},Z={language:"rust",client:"reqwest",generate(r,n){const e=new y({indent:r.indent||"  ",join:r.join||`
`});if(e.line("use reqwest::blocking::Client;"),e.line("use std::error::Error;"),e.line(),e.line("fn main() -> Result<(), Box<dyn Error>> {"),e.indent(),e.line("let client = Client::new();"),e.line(),e.line("let res = client.request(reqwest::Method::"+n.method.toUpperCase()+', "'+n.url+'")'),e.indent(),n.params&&Object.keys(n.params).length>0){e.line(".query(&["),e.indent();for(const[o,i]of Object.entries(n.params))if(Array.isArray(i))for(const l of i)e.line(`("${o}", "${l}"),`);else e.line(`("${o}", "${i}"),`);e.outdent(),e.line("])")}if(n.headers)for(const[o,i]of Object.entries(n.headers))Array.isArray(i)?i.forEach(l=>e.line(`.header("${o}", "${l}")`)):e.line(`.header("${o}", "${i}")`);if(n.cookies)for(const[o,i]of Object.entries(n.cookies))Array.isArray(i)?i.forEach(l=>e.line(`.cookie("${o}", "${l}")`)):e.line(`.cookie("${o}", "${i}")`);if(n.body){const o=p(n.headers);d(o,"form")?(e.line(".form(&"),e.json(n.body),e.append(")")):d(o,"json")||!o&&$(n.body)?(e.line(".json(&"),e.json(n.body),e.append(")")):j(n.body)&&e.line(`.body("${n.body.replace(/"/g,'\\"')}")`)}return e.line(".send()?;"),e.outdent(),e.line(),r.handleErrors?(e.line("if res.status().is_success() {"),e.indent(),e.line('println!("{}", res.text()?);'),e.outdent(),e.line("} else {"),e.indent(),e.line('eprintln!("Request failed with status: {}", res.status());'),e.outdent(),e.line("}")):e.line('println!("{}", res.text()?);'),e.line("Ok(())"),e.outdent(),e.line("}"),e.output()}},ee={default:!0,language:"shell",client:"curl",generate(r,n){const e=new y({indent:r.indent||"  ",join:r.join||` \\
`});if(e.line(`curl -X ${n.method} "${n.url}"`),e.indent(),n.params)for(const[l,s]of Object.entries(n.params))if(Array.isArray(s))for(const t of s)e.line(`-G -d "${l}=${t.replace(/"/g,'\\"')}"`);else e.line(`-G -d "${l}=${s.replace(/"/g,'\\"')}"`);if(n.headers)for(const[l,s]of Object.entries(n.headers))if(Array.isArray(s))for(const t of s)e.line(`-H "${l}: ${t.replace(/"/g,'\\"')}"`);else e.line(`-H "${l}: ${s.replace(/"/g,'\\"')}"`);if(n.cookies){const l=Object.entries(n.cookies).flatMap(([s,t])=>Array.isArray(t)?t.map(a=>`${s}=${a}`):`${s}=${t}`).join("; ");e.line(`-b "${l}"`)}if(O(n.body)){const l=p(n.headers);if(d(l,"json")||!l&&$(n.body))e.line("-d $'"),e.json(n.body),e.append("'");else if(d(l,"form")){const s=new URLSearchParams(n.body).toString().replace(/'/g,"'\\''");e.line(`-d '${s}'`)}else if(typeof n.body=="string"){const s=n.body.replace(/'/g,"'\\''");e.line(`-d '${s}'`)}}let i=e.output();return i=i.replace(/\\\s*$/,"").trim(),i}},ne={default:!0,language:"swift",client:"nsurlsession",generate(r,n){const e=new y({indent:r.indent||"  ",join:r.join||`
`});if(e.line("import Foundation"),e.line(),n.params&&Object.keys(n.params).length>0){e.line('var urlComponents = URLComponents(string: "'+n.url+'")!'),e.line("var queryItems: [URLQueryItem] = []");for(const[o,i]of Object.entries(n.params))if(Array.isArray(i))for(const l of i)e.line(`queryItems.append(URLQueryItem(name: "${o}", value: "${l}"))`);else e.line(`queryItems.append(URLQueryItem(name: "${o}", value: "${i}"))`);e.line("urlComponents.queryItems = queryItems"),e.line("let url = urlComponents.url!")}else e.line('let url = URL(string: "'+n.url+'")!');if(e.line("var request = URLRequest(url: url)"),e.line('request.httpMethod = "'+n.method.toUpperCase()+'"'),n.headers&&Object.keys(n.headers).length>0){e.line();for(const[o,i]of Object.entries(n.headers))Array.isArray(i)?i.forEach(l=>e.line(`request.addValue("${l}", forHTTPHeaderField: "${o}")`)):e.line(`request.addValue("${i}", forHTTPHeaderField: "${o}")`)}if(n.cookies&&Object.keys(n.cookies).length>0){e.line();for(const[o,i]of Object.entries(n.cookies))e.line(`request.addValue("${o}=${i}", forHTTPHeaderField: "Cookie")`)}return n.body&&(e.line(),typeof n.body=="string"?(e.line(`let bodyString = "${n.body.replace(/"/g,'\\"')}"`),e.line("request.httpBody = bodyString.data(using: .utf8)")):(e.line("let bodyDict: [String: Any] = "),e.json(n.body),e.line("request.httpBody = try? JSONSerialization.data(withJSONObject: bodyDict)"))),e.line(),e.line("let task = URLSession.shared.dataTask(with: request) { data, response, error in"),e.indent(),e.line("if let error = error {"),e.indent(),e.line('print("Error: \\(error)")'),e.line("return"),e.outdent(),e.line("}"),e.line(),e.line("if let httpResponse = response as? HTTPURLResponse {"),e.indent(),e.line("if httpResponse.statusCode == 200, let data = data {"),e.indent(),e.line("let responseString = String(data: data, encoding: .utf8)"),e.line('print(responseString ?? "No response data")'),e.outdent(),e.line("} else {"),e.indent(),e.line('print("Request failed with status code: \\(httpResponse.statusCode)")'),e.outdent(),e.line("}"),e.outdent(),e.line("}"),e.outdent(),e.line("}"),e.line(),e.line("task.resume()"),e.output()}};return f(L),f(B),f(P),f(H),f(x),f(N),f(J),f(D),f(I),f(F),f(M),f(G),f(Q),f(z),f(V),f(K),f(W),f(X),f(Y),f(Z),f(ee),f(ne),Object.assign({},Object.freeze(Object.defineProperty({__proto__:null,Builder:y,ClearRegistry:R,Clients:h,Generate:v,IsJsonRequest:T,Languages:A,Register:f,Search:C,SetDefault:q},Symbol.toStringTag,{value:"Module"})))});/*! End GimmeHTTP */
//# sourceMappingURL=gimmehttp.js.map
